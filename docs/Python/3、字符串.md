<!-- 边栏的标题用 # -->
# 03 字符串
[<< 上一章](./2、运算符.md) | [下一章 >>](./4、列表.md)

## 字符串
文本是一种字符串数据类型。任何以文本形式书写的数据类型都是字符串。任何用单引号、双引号或三引号括起来的数据都是字符串。有很多方法和内置函数来处理字符串类型的数据。使用 len() 方法获取字符串的长度。

### 创建字符串

```py
letter = 'P'                # 字符串可以是一个字符，也可以是一堆文字
print(letter)               # P
print(len(letter))          # 1
greeting = 'Hello, World!'  # 字符串使用单引号或双引号构建，"Hello, World!"
print(greeting)             # Hello, World!
print(len(greeting))        # 13
chinese = "你好"
print(len(chinese))         # 2
```

多行字符串使用三个单引号 (''') 或者三个双引号 (""") 创建。 以下为示例：

```py
multiline_string = '''
                      古人学问无遗力，
                      少壮工夫老始成。
                      纸上得来终觉浅，
                      绝知此事要躬行。
                                    ————《冬夜读书示子聿》宋·陆游
                    '''
print(multiline_string)

# 换种方式
multiline_string = """
                      莫言下岭便无难，
                      赚得行人错喜欢。
                      政入万山围子里，
                      一山放出一山拦。
                                    ————《过松源晨炊漆公店》宋·杨万里
                    """
print(multiline_string)
```

### 字符串串联

我们可以将字符串连接在一起。合并或连接字符串称为串联。请看下面的示例：

```py

first_name = 'hua'
last_name = 'Joffery'
space = ' '
full_name = first_name  +  space + last_name
print(full_name) # hua Joffery
# 使用 len() 内置函数获取字符串的长度
print(len(first_name))  # 3
print(len(last_name))   # 7
print(len(first_name) > len(last_name)) # false
print(len(full_name)) # 11
```

### 字符串中的转译序列

在 Python 和其他编程语言中，\ 后跟一个字符是转义序列。以下是一些常见的转义序列：

- \n : 换行
- \t : 制表符(4个空格)
- \ : 转义字符
eg:
- \\ : 反斜杠
- \' : 单引号
- \" : 双引号

现在，让我们看看上面的转义序列的用法和示例。

```py
print('世事相违每如此，\n好怀百岁几回开？') # 换行
print('班级\t姓名\t学号') # 增加一个制表符
print('一班\t张三\t01')
print('二班\t李四\t02')
print('三班\t王五\t03')
print('输出一个反斜杠(\\)') # 输出反斜杠
print('\"Hello, World!\"') # 在单引号里写双引号

# 输出
世事相违每如此，
好怀百岁几回开？
班级	姓名	学号
一班	张三	01
二班	李四	02
三班	王五	03
输出一个反斜杠(\)
"Hello, World!"
```

### 字符串格式化

#### 传统风格字符串格式化 (% 操作符)


在 Python 中有许多格式化字符串的方法。本节，我们将介绍其中一些方法。
“%”运算符用于格式化包含在“元组”（固定大小列表）中的一组变量，以及格式字符串，其中包含普通文本以及“参数说明符”、特殊符号如“%s”、“%d”、“%f”、“%.<small>数字</small>f”。

- %s - 字符串 (或者任何可以用字符串表述的对象，例如数字)
- %d - 整型
- %f - 浮点型
- "%.<small>小数位数</small>f" - 固定精度的浮点数

```py
# 仅字符串
first_name = 'hua'
last_name = 'joffery'
language = 'Python'
formated_string = 'I am %s %s. Learning %s' %(first_name, last_name, language)
print(formated_string)

# 字符串和数字
radius = 10
pi = 3.14
area = pi * radius ** 2
formated_string = '半径为 %d 的圆的面积为 %.2f.' %(radius, area) # 2 表示小数点后的 2 位有效数字

python_libraries = ['Django', 'Flask', 'NumPy', 'Matplotlib','Pandas']
formated_string = 'Python的库有 %s' % (python_libraries)
print(formated_string)
```

#### 新式字符串格式化 (str.format)

这种格式化方式是在 Python 3 中引入的。

```py

first_name = 'hua'
last_name = 'joffery'
language = 'Python'
formated_string = 'I am {} {}. Learning {}'.format(first_name, last_name, language)
print(formated_string)
a = 4
b = 3

print('{} + {} = {}'.format(a, b, a + b))
print('{} - {} = {}'.format(a, b, a - b))
print('{} * {} = {}'.format(a, b, a * b))
print('{} / {} = {:.2f}'.format(a, b, a / b)) # 限制保留两位小数
print('{} % {} = {}'.format(a, b, a % b))
print('{} // {} = {}'.format(a, b, a // b))
print('{} ** {} = {}'.format(a, b, a ** b))

# 输出
4 + 3 = 7
4 - 3 = 1
4 * 3 = 12
4 / 3 = 1.33
4 % 3 = 1
4 // 3 = 1
4 ** 3 = 64

#### 字符串插值 / f-Strings (Python 3.6+)

另一种新的字符串格式化是字符串插值，f-strings。字符串以 f 开头，我们可以在相应的位置注入数据。

```py
a = 4
b = 3
print(f'{a} + {b} = {a +b}')
print(f'{a} - {b} = {a - b}')
print(f'{a} * {b} = {a * b}')
print(f'{a} / {b} = {a / b:.2f}') #:.2f保留两位小数
print(f'{a} % {b} = {a % b}')
print(f'{a} // {b} = {a // b}')
print(f'{a} ** {b} = {a ** b}')
```

### Python 字符串是字符序列

Python 字符串是字符序列，与其他 Python 有序对象 - 列表和元组 - 共享基本访问方法。从字符串中提取单个字符的最简单方法（以及从任何序列中提取单个成员的方法）是将它们解压缩到相应的变量中。

#### 拆解字符

```py
language = 'Python'
a,b,c,d,e,f = language # 拆解字符串中的字符并赋值给变量
print(a) # P
print(b) # y
print(c) # t
print(d) # h
print(e) # o
print(f) # n
```

#### 通过索引获取字符串中的字符

在编程中，计数从零开始。因此，字符串的第一个字母位于零索引处，字符串的最后一个字母位于字符串长度减一处。

![String index](../pythonImages/string_index.png)

```py
language = 'Python'
first_letter = language[0]
print(first_letter) # P
second_letter = language[1]
print(second_letter) # y
last_index = len(language) - 1
last_letter = language[last_index]
print(last_letter) # n
```

如果我们想从右边开始，我们可以使用负索引。-1 是最后一个索引。

```py
language = 'Python'
last_letter = language[-1]
print(last_letter) # n
second_last = language[-2]
print(second_last) # o
```

#### 字符串切片

在 Python 中，我们可以将字符串切片为子字符串。

```py
language = 'Python'
first_three = language[0:3] # 从零索引开始，直到 3 但不包括 3
print(first_three) #Pyt
last_three = language[3:6]
print(last_three) # hon
# 另一种方式
last_three = language[-3:] #当冒号后面没有写数字时（即 [-3:]），会一直截取到序列的末尾。
print(last_three)   # hon
last_three = language[3:]
print(last_three)   # hon
```

#### 字符串反转

我们可以轻松地反转字符串。

```py
greeting = 'Hello, World!'
print(greeting[::-1]) # !dlroW ,olleH
#[start:stop:step]（开始:结束:步长）。
#第一个冒号前（start）为空：表示从“端点”开始。
#第二个冒号前（stop）为空：表示到“另一端”结束。
#步长（step）为 -1:从右向左（逆序）读取，每次移动 1 个单位
```

#### 切片时跳过字符

通过将步长参数传递给切片方法，可以在切片时跳过字符。
```py
language = 'Python'
pto = language[0:6:2] #
print(pto) # Pto
```

### 字符串方法

有许多字符串方法可以让我们格式化字符串。在下面的示例中，我们使用其中一些：

- capitalize(): 将字符串中的第一个字符转换为大写字母
```py
language = 'python language'
print(language.capitalize()) # 'Python'
```

- count(): 返回字符串中子字符串的出现次数，count(子字符串，start=..，end=..)。start 是计数的起始索引，end 是计数的最后一个索引。
```py
language = 'python language'
print(language.count('n')) # 2
print(language.count('n', 7, 14)) # 1, 
print(language.count('th')) # 1`
```

- endswith(): 判断字符串是否以特定的子字符串结尾，返回 True 或 False
```py
language = 'python language'
print(language.endswith('ge'))   # True
print(language.endswith('on')) # False
```

- expandtabs(): 用空格替换制表符，默认制表符大小为 8。它接受制表符大小参数
```py
language = 'learning\tpython\tlanguage'
print(language.expandtabs())   # learning        python  language
print(language.expandtabs(10)) # learning  python    language
```

- find(): 返回子字符串第一次出现的索引，如果未找到则返回 -1
```py
language = 'python language'
print(language.find('y'))  # 5
print(language.find('th')) # 0
```

- rfind(): 返回子字符串最后一次出现的索引，如果未找到则返回 -1
```py
language = 'python language'
print(language.rfind('a'))  # 12
print(language.rfind('th')) # 2
```

- format(): 将字符串格式化为更美观的输出
更多字符串格式化的方法和信息：请点击[链接](https://www.programiz.com/python-programming/methods/string/format)

```py
first_name = 'hua'
last_name = 'joffery'
age = 13<<1
country = 'Suzhou'
sentence = 'I am {} {}. I am {} years old. I live in {}.'.format(first_name, last_name, age, country)
print(sentence) # I am hua joffery. I am 26 years old. I live in Suzhou.
```

- index(): 返回子字符串的最小索引，附加参数表示起始和结束索引（默认为 0，字符串长度为 - 1）。如果未找到子字符串，则会引发 valueError。
```py
language = 'python language'
sub_string = 'an'
print(language.index(sub_string))  # 8
print(language.index(sub_string, 9)) # error
```

- rindex(): 返回子字符串的最大索引，附加参数表示起始和结束索引（默认为 0，字符串长度为 - 1）。
```py
language = 'python language'
sub_string = 'an'
print(language.rindex(sub_string))  # 8
print(language.rindex(sub_string, 9)) # error
```

- isalnum(): 判断字符串字符是否都是字母数字字符
```py
language = 'pythonlanguage'
print(language.isalnum()) # True

language = 'python language'
print(language.isalnum()) # False, 空格不是字母字符
```

- isalpha(): 判断字符串字符是否都是字母字符 (a-z and A-Z)
```py
language = 'python language'
print(language.isalpha()) # False, 空格不是字母字符
language = 'pythonlanguage'
print(language.isalpha()) # True
num = '123'
print(num.isalpha())      # False
```

- isdecimal(): 判断符串中的所有字符是否都是十进制 (0-9)
```py
language = 'python language'
print(language.isdecimal())  # False
language = '123'
print(language.isdecimal())  # True
language = '\u00B2'
print(language.isdigit())   # False
language = '12 3'
print(language.isdecimal())  # False, 含有空格
```

- isdigit(): 判断字符串中的所有字符是否都是数字（0-9 和一些其他表示数字的 Unicode 字符）
```py
language = 'one'
print(language.isdigit()) # False
language = '1'
print(language.isdigit())   # True
language = '\u00B2'
print(language.isdigit())   # True
```

- isnumeric(): 判断字符串中的所有字符是否都是数字或与数字相关（就像 isdigit()，只是接受更多符号，如 ½）
```py
num = '10'
print(num.isnumeric()) # True
num = '½'
print(num.isnumeric()) # True
num = '\u00BD'
print(num.isnumeric()) # True
num = '10.5'
print(num.isnumeric()) # False
```

- isidentifier(): 判断有效的标识符 - 检查字符串是否是有效的变量名
```py
language = '123pythonlanguage'
print(language.isidentifier()) # False, 因为以数字开头
language = 'python_language'
print(language.isidentifier()) # True
```

- islower(): 判断字符串中的所有字母是否都是小写(检查的是字符串中所有的“具备大小写特征的字符”是否都是小写)
```py
language = 'python language'
print(language.islower()) # True
language = 'python language'
print(language.islower()) # True
#忽略不具备大小写属性的字符：空格、数字、标点符号、特殊符号（如 @, #）等都会被直接跳过
#在剩下的字符中，只要至少有一个字符具备大小写形式，且所有这些字符都是小写，结果就为 True
language = ' '
print(language.islower()) # False
```

#

- isupper(): 判断字符串中的所有字母是否都是大写
```py
language = 'python language'
print(language.isupper()) #  False
language = 'python language'
print(language.isupper()) # True
```

- join(): 返回连接后的字符串
```py
web_tech = ['HTML', 'CSS', 'JavaScript', 'React']
result = ' '.join(web_tech)
print(result) # 'HTML CSS JavaScript React'
```

```py
web_tech = ['HTML', 'CSS', 'JavaScript', 'React']
result = '#'.join(web_tech)
print(result) # HTML#CSS#JavaScript#React
```

- strip(): 从字符串的两端（开头和结尾）向中间扫描，删除匹配的字符，直到遇到第一个不匹配的字符为止。
```py
language = 'python languageppppp'
print(language.strip('py')) # thon language
```

- replace(): 用给定的字符串替换子字符串
```py
language = 'python language'
print(language.replace('python', 'coding')) # coding language
```

- split(): 使用给定的字符串或空格作为分隔符来拆分字符串
```py
language = 'python language'
print(language.split()) # ['python', 'language']
language = 'python，language'
print(language.split('，')) # ['python', 'language']
```

- title(): 返回标题大小写的字符串(字符串首字母大写)
```py
language = 'python language'
print(language.title()) # Python Language
```

- swapcase(): 将所有大写字符转换为小写字符，将所有小写字符转换为大写字符
```py
language = 'python language'
print(language.swapcase())   # PYTHON LANGUAGE
language = 'PYTHON LANGUAGE'
print(language.swapcase())  # python language
```

- startswith(): 判断字符串是否以指定字符串开头

```py
language = 'python language'
print(language.startswith('python')) # True
```

大小写转换：capitalize(), title(), swapcase(), islower(), isupper()。

搜索与计数：count(), find(), index(), startswith(), endswith()。

清洗与替换：
strip(): 移除两端指定字符。
replace(): 全局替换子串。

拆分与合并：
split(): 将字符串切分为列表。
join(): 将列表元素连接成字符串。

内容判断：isalpha(), isdigit(), isalnum(), isidentifier() 等。


